<!DOCTYPE html>
<html lang="en-us">
	<head>
		<title>Ricebook</title>
		<meta charset="utf-8">
		<meta name="author" content="Zeliang Ye">
	</head>
	<body>
		<form id="myForm" method="GET" action="file:///home/yezeliang/rice/Comp531/zy23/hw1/formProcessor.html">
			<p>Account Name:</p>
			<input id="account" name="account" type="text" placeholder="Account Name" pattern="^[A-za-z][A-Za-z0-9]*$" title="Account Name only accepts numbers and characters a-z and A-Z, and the start character can not be number" required>
			<p>Display Name:</p>
			<input id="display" name="display" type="text" placeholder="Display Name" title="(optional)">
			<p>Email Address:</p>
			<input id="email" name="email" type="email" pattern="^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$"  placeholder="Your valid email" title="Only accepts valid email format like XX@XX.XX" required>
			<p>Phone Number:</p>
			<input id="phone" name="phone" type="tel" pattern="\d{3}-\d{3}-\d{4}" placeholder="Your valid phone number" title="Only accepts valid phone format like xxx-xxx-xxxx" required>
			<p>Date of Birth:</p>
			<input id="birthdate" name="birthdate" type="date" required>
			<p>Zip Code:</p>
			<input id="zipcode" name="zipcode" type="text" pattern="\d{5}" placeholder="Valid zip number XXXXX" title="Only accepts valid zip number like xxxxx" required>
			<p>Password:</p>
			<input id="password" name="password" type="password" title="Password required" required>
			<p>Confirm Password:</p>
			<input id="confirmpassword" name="confirmpassword" type="password" title="Confirm your password"  required>
			<input id="timestamp" name="timestamp" type="hidden">
			<br><br>
			<input id="submit" name="submit" type="submit" value="Submit" onclick="return validate()"> 
			<input id="clear" name="clear" type="reset" value="Clear">
		</form>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		function validate() { /*This function calls to validate age and matching password.*/	
			var form = document.getElementById("myForm");
			console.log(form);
			var current = Date.now();
			form.timestamp.value=current;
			var birthdate = new Date(form.birthdate.value);
			var currentdate = new Date(current);
			var age = currentdate.getFullYear()-birthdate.getFullYear() + (currentdate.getMonth()-birthdate.getMonth())/12 + (currentdate.getDate()-birthdate.getDate())/365;
			if(age < 18){
				window.alert("Age under 18!");
				return false;
			}
			if(form.password.value != form.confirmpassword.value){
				window.alert("Password not match!");
				return false;
			}
			return true;
		}
		</script>
	</body>

</html>